<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ich brauche Kohle, Mann!</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<script type="module">
    // Importiere die notwendigen Firebase-Module
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-database.js";

    // Firebase-Konfiguration
    const firebaseConfig = {
        apiKey: "AIzaSyC9fRuO8kTd5ttT5pu-dlsO157DY_H7NgE",
        authDomain: "pushcoal-745bc.firebaseapp.com",
        databaseURL: "https://pushcoal-745bc-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "pushcoal-745bc",
        storageBucket: "pushcoal-745bc.firebasestorage.app",
        messagingSenderId: "592638766918",
        appId: "1:592638766918:web:10a98c5f87a563c9823f47",
        measurementId: "G-W16QRE2BFL"
    };

    // Firebase initialisieren
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app); // Holen der Datenbank-Referenz

    // Funktion, um URL-Parameter zu extrahieren
    function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

    const tableNumber = getQueryParam('tableNumber') || '1'; // Standardwert '1', falls nicht angegeben


    // Button-Event Listener, um Benachrichtigung zu senden
    document.getElementById('notifyButton').addEventListener('click', () => {
        const notificationRef = ref(db, 'notifications');  // Referenz auf 'notifications' in der Datenbank
        set(notificationRef, {
            message: 'Neue Kohle',  // Nachricht, die gesendet werden soll
            timestamp: new Date().toLocaleTimeString(),  // nur die Uhrzeit
            tableNumber: tableNumber
        }).then(() => {
            // Text anzeigen, wenn Benachrichtigung erfolgreich gesendet wurde
            document.getElementById('confirmationMessageCoal').innerText = 'Kohle erfolgreich bestellt!';
        }).catch((error) => {
            console.error('Fehler beim Senden der Benachrichtigung:', error);
        });
    });

    document.getElementById('notifyButton2').addEventListener('click', () => {
        const notificationRef = ref(db, 'notifications');  // Referenz auf 'notifications' in der Datenbank
        set(notificationRef, {
            message: 'Service',  // Nachricht, die gesendet werden soll
            timestamp: new Date().toLocaleTimeString(),  // nur die Uhrzeit
            tableNumber: tableNumber
        }).then(() => {
            // Text anzeigen, wenn Benachrichtigung erfolgreich gesendet wurde
            document.getElementById('confirmationMessageCoal').innerText = 'Service erfolgreich bestellt!';
        }).catch((error) => {
            console.error('Fehler beim Senden der Benachrichtigung:', error);
        });
    });

</script>

<h1>Was brauchst du?</h1>
<button id="notifyButton">Kohle</button>
<button id="notifyButton2">Service</button>
<!-- BestÃ¤tigungstext wird hier angezeigt -->
<p id="confirmationMessageCoal"></p>




    <!-- Hier ist der Shisha Rauch -->
    <div class="smoke"></div>
    <div class="smoke"></div> 
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>    
    <div class="smoke"></div> 
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div> 
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <div class="smoke"></div>
    <!-- Dein Footer-Inhalt -->


</body>
</html>
